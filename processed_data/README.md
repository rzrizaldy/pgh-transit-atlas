# Processed Data Directory

This directory contains all processed analytical outputs from the ETL pipeline (`etl.py`). Data is exported in **both JSON** (for dashboard) and **CSV** (for easy inspection in Excel/Pandas).

## Files Overview

### JSON Files (for Dashboard)

| File | Size | Description |
|------|------|-------------|
| `archetypes.json` | 540B | Trip behavior clusters from K-Means (Commuter, Last-Mile, Errand, Leisure) |
| `bike_stations_geo.json` | 8.5K | POGOH bike station locations with trip counts and dock capacity |
| `bus_stops_geo.json` | 21K | Top 100 PRT bus stops by ridership with integration index scores |
| `correlation.json` | 203K | Scatter plot data: bus boardings vs integration index (R²=0.372) |
| `daily_timeseries.json` | 16K | **365-day daily trip counts** (system-wide, campus, city splits) |
| `demographics.json` | 718B | Top 10 stations by member vs casual rider breakdown |
| `directionality.json` | 203B | Trip bearing distribution (8 cardinal directions) |
| `duration_distribution.json` | 645B | Trip duration histogram (30 bins, 0-60 minutes) |
| `heatmap.json` | 2.9K | Hour × Day of Week trip volume matrix |
| `monthly_trends.json` | 1.3K | Monthly POGOH + historical PRT ridership (2023-2025) |
| `seasonal_heatmap.json` | 1.9K | Hour × Season trip volume matrix |
| `top_prt_pogoh.json` | 641B | Top 10 bus stops near POGOH stations (multimodal nodes) |

### CSV Files (for Inspection)

| File | Rows | Columns | Description |
|------|------|---------|-------------|
| `archetypes.csv` | 4 | 5 | Trip archetypes with duration, distance, peak hour |
| `bike_stations_geo.csv` | 60 | 5 | Bike stations with lat/lon, trip counts, docks |
| `bus_stops_geo.csv` | 100 | 7 | Top bus stops with lat/lon, integration scores |
| `correlation.csv` | 2,720 | 4 | Bus-bike correlation data points |
| `daily_timeseries.csv` | 365 | 4 | Daily trips (total, campus, city) for full year |
| `demographics.csv` | 10 | 3 | Member/Casual breakdown by station |
| `directionality.csv` | 8 | 2 | Trip counts by compass direction |
| `duration_distribution.csv` | 30 | 2 | Trip duration histogram bins |
| `heatmap_hour_day.csv` | 24 | 8 | Hourly trips × Day of Week |
| `heatmap_hour_season.csv` | 24 | 5 | Hourly trips × Season |
| `monthly_trends.csv` | 12 | 4 | Monthly averages (total, campus, city) |
| `prt_historical.csv` | 8 | 2 | PRT bus ridership 2023-2025 |
| `top_prt_pogoh.csv` | 10 | 3 | Top multimodal integration nodes |

## Data Generation

All files are generated by running:

```bash
python3 etl.py
```

This processes:
- 12 months of POGOH trip data (Nov 2024 - Oct 2025)
- 556,515 bikeshare trips
- 19,849 PRT bus stops with 70+ months of ridership history

## Key Metrics

- **Total Trips**: 556,515 (after removing 1,027 outliers >4 hours)
- **Campus Corridor**: 378,811 trips (68.1% of system volume)
- **Integration Index Range**: 0 - 3,732.86
- **Top Integrated Stop**: 7th St & Penn Ave (Golden Triangle)
- **Peak Hour**: Monday 5:00 PM (7,737 trips)

## Data Quality

- Geographic validation: Campus geofence (40.435-40.450°N, -79.970 to -79.940°W)
- Haversine distance calculations for trip displacement
- 400m walkshed buffer for bus-bike integration
- Outlier filtering: trips >4 hours, impossible speeds >50 km/h
- Zero-ridership bus stops filtered out

## Usage

These files are consumed by `build_datajs.py` to create the consolidated `data.js` file for the HTML dashboard.

---

**Generated**: 2025-11-22
**Pipeline**: etl.py v1.0
**Source**: WPRDC (Western Pennsylvania Regional Data Center)
